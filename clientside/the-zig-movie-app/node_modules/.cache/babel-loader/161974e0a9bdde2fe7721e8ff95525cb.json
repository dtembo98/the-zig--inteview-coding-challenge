{"ast":null,"code":"var _jsxFileName = \"/home/trojan/Desktop/Workspace/workspace-David/workspace/react/interview-coding-challenge/clientside/the-zig-movie-app/src/components/home/home.component.tsx\";\nimport React from \"react\";\nimport MovieList from \"../../components/movie-list/movie-list.component\";\nimport Header from \"../header/header.component\"; //import SearchBox from \"../../components/search-box/search-box.component\";\n\nimport { config } from \"../../config\";\nimport LoadMoreButton from \"../../components/loadmore button/loadmore.component\";\nimport \"./home.style.css\";\n\nclass Home extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      movies: [],\n      heroimage: {},\n      searchField: \"\",\n      currentPage: 0\n    };\n\n    this.fetchData = API_URL => {\n      fetch(API_URL).then(results => results.json()).then(data => {\n        this.setState({\n          movies: [...this.state.movies, ...data.results],\n          heroimage: data.results[1],\n          currentPage: data.page\n        }, () => {\n          // check for browser support for local storage and set the state in local storage\n          if (typeof Storage !== undefined) {\n            localStorage.setItem(\"homeState\", JSON.stringify(this.state));\n          }\n\n          console.log(this.state.movies);\n        });\n      });\n    };\n\n    this.fetchMovie = () => {\n      let API_URL = \"\";\n\n      if (this.state.searchField) {\n        API_URL = `${config.BASE_URL}search?&query=${this.state.searchField}`;\n      } else {\n        API_URL = `${config.BASE_URL}popular/?&page=1`;\n      }\n\n      this.fetchData(API_URL);\n    };\n\n    this.handleChange = event => {\n      const query = event.target.value;\n      this.setState({\n        movies: [],\n        heroimage: {},\n        searchField: query\n      }, () => this.fetchMovie());\n    };\n\n    this.loadMore = () => {\n      let API_URL = \"\";\n\n      if (this.state.searchField === \"\") {\n        API_URL = `${config.BASE_URL}popular/?&page=${this.state.currentPage + 1}`;\n      } else {\n        //API_URL = `https://api.themoviedb.org/3/search/movie?api_key=${config.API_KEY}&language=en-US&query=${this.state.searchField}`;\n        API_URL = `${config.BASE_URL}search?&query=${this.state.searchField}`;\n      }\n\n      this.fetchData(API_URL);\n    };\n  }\n\n  componentDidMount() {\n    //check for local storage browser support\n    if (typeof Storage !== undefined) {\n      if (localStorage.getItem(\"homeState\")) {\n        // retrieve items from local storage\n        const homeState = JSON.parse(localStorage.getItem(\"homeState\"));\n        this.setState({ ...homeState\n        });\n      }\n    }\n\n    const API_URL = `${config.BASE_URL}movies/popular/?&page=1`;\n    this.fetchData(API_URL);\n  } // fetch data from the moviedb api\n\n\n  componentWillUnmount() {\n    localStorage.clear();\n  } //get the entered chareacter as the user types in the search bar\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(Header, {\n      heroimage: this.state.heroimage,\n      handleChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), this.state.searchField ? React.createElement(\"h2\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Search Results\") : React.createElement(\"h2\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Popular movies\"), React.createElement(MovieList, {\n      movies: this.state.movies,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(LoadMoreButton, {\n      onclick: this.loadMore,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/trojan/Desktop/Workspace/workspace-David/workspace/react/interview-coding-challenge/clientside/the-zig-movie-app/src/components/home/home.component.tsx"],"names":["React","MovieList","Header","config","LoadMoreButton","Home","Component","state","movies","heroimage","searchField","currentPage","fetchData","API_URL","fetch","then","results","json","data","setState","page","Storage","undefined","localStorage","setItem","JSON","stringify","console","log","fetchMovie","BASE_URL","handleChange","event","query","target","value","loadMore","componentDidMount","getItem","homeState","parse","componentWillUnmount","clear","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport MovieList from \"../../components/movie-list/movie-list.component\";\nimport Header from \"../header/header.component\";\n//import SearchBox from \"../../components/search-box/search-box.component\";\nimport { config } from \"../../config\";\nimport LoadMoreButton from \"../../components/loadmore button/loadmore.component\";\nimport \"./home.style.css\";\nclass Home extends React.Component {\n  state = {\n    movies: [],\n    heroimage: {},\n    searchField: \"\",\n    currentPage: 0,\n  };\n  componentDidMount() {\n    //check for local storage browser support\n    if (typeof Storage !== undefined) {\n      if (localStorage.getItem(\"homeState\")) {\n        // retrieve items from local storage\n        const homeState = JSON.parse(localStorage.getItem(\"homeState\")!);\n\n        this.setState({ ...homeState });\n      }\n    }\n    const API_URL = `${config.BASE_URL}movies/popular/?&page=1`;\n\n    this.fetchData(API_URL);\n  }\n  // fetch data from the moviedb api\n  fetchData = (API_URL: string) => {\n    fetch(API_URL)\n      .then((results) => results.json())\n      .then((data) => {\n        this.setState(\n          {\n            movies: [...this.state.movies, ...data.results],\n            heroimage: data.results[1],\n            currentPage: data.page,\n          },\n          () => {\n            // check for browser support for local storage and set the state in local storage\n            if (typeof Storage !== undefined) {\n              localStorage.setItem(\"homeState\", JSON.stringify(this.state));\n            }\n            console.log(this.state.movies);\n          }\n        );\n      });\n  };\n  // method for passing the url to fetch data from the api\n  fetchMovie = () => {\n    let API_URL = \"\";\n\n    if (this.state.searchField) {\n      API_URL = `${config.BASE_URL}search?&query=${this.state.searchField}`;\n    } else {\n      API_URL = `${config.BASE_URL}popular/?&page=1`;\n    }\n    this.fetchData(API_URL);\n  };\n  componentWillUnmount() {\n    localStorage.clear();\n  }\n  //get the entered chareacter as the user types in the search bar\n  handleChange = (event: any) => {\n    const query: string = event.target.value;\n    this.setState(\n      {\n        movies: [],\n        heroimage: {},\n        searchField: query,\n      },\n      () => this.fetchMovie()\n    );\n  };\n  // method to implement the load more button functionality\n  loadMore = () => {\n    let API_URL: string = \"\";\n\n    if (this.state.searchField === \"\") {\n      API_URL = `${config.BASE_URL}popular/?&page=${\n        this.state.currentPage + 1\n      }`;\n    } else {\n      //API_URL = `https://api.themoviedb.org/3/search/movie?api_key=${config.API_KEY}&language=en-US&query=${this.state.searchField}`;\n      API_URL = `${config.BASE_URL}search?&query=${this.state.searchField}`;\n    }\n\n    this.fetchData(API_URL);\n  };\n  render() {\n    return (\n      <div className=\"home\">\n        <Header\n          heroimage={this.state.heroimage}\n          handleChange={this.handleChange}\n        />\n        {/* <SearchBox handleChange={this.handleChange} /> */}\n        {this.state.searchField ? (\n          <h2 className=\"title\">Search Results</h2>\n        ) : (\n          <h2 className=\"title\">Popular movies</h2>\n        )}\n        <MovieList movies={this.state.movies} />\n        <LoadMoreButton onclick={this.loadMore} />\n      </div>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}